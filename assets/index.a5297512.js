import{r as c,j as h,L as N,u as y,R as p,a as f,b as v,c as b,B as L}from"./vendor.58ccb92c.js";const M=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function l(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(t){if(t.ep)return;t.ep=!0;const r=l(t);fetch(t.href,r)}};M();const g=()=>{const o="https://ghibliapi.herokuapp.com/films/",[n,l]=c.exports.useState(!1),[i,t]=c.exports.useState(!0),[r,a]=c.exports.useState([]),d=async()=>{const m=await fetch(o);if(m.ok){const x=await m.json();a(x),t(!1)}else l(!0)};return c.exports.useEffect(()=>{d()},[o]),{isError:n,movies:r,isLoading:i}},e=h.exports.jsx,s=h.exports.jsxs,u=h.exports.Fragment,S=({movie:o,setShowModal:n})=>{c.exports.useState([]),c.exports.useState([]);const{image:l,title:i,release_date:t,description:r}=o;return c.exports.useEffect(()=>{},[r]),s("li",{className:"movie-container",children:[e("div",{className:"movie-img",children:e("img",{src:l,alt:i})}),s("div",{className:"movie-desc",children:[e("h2",{children:i}),e("br",{}),e("p",{children:e("strong",{children:t})}),s("p",{style:{display:"inline"},children:[r.slice(0,100),"..."]}),e(N,{className:"btn",to:`/${i}`,onClick:()=>n(!0),children:"see more"})]})]})},E=({setShowModal:o})=>{const{isError:n,movies:l,isLoading:i}=g(),[t,r]=c.exports.useState({}),{movie:a}=y();return c.exports.useEffect(()=>{const d=l.find(m=>m.title===a);console.log(d),r(d)},[l]),p.createPortal(s(u,{children:[e("div",{className:"backdrop"}),s("div",{className:"modal",children:[e("h1",{style:{color:"#fff",textAlign:"center"},children:!i&&t.title}),i?e("h1",{children:"Loading"}):s(u,{children:[s("h2",{style:{color:"#fff",textAlign:"center"},children:["Original title: ",t.original_title]}),s("div",{className:"movie-section",children:[e("img",{className:"modal-img",src:t.movie_banner,alt:""}),s("section",{className:"movie-info",children:[s("h3",{children:["Director: ",t.director]}),s("h3",{children:["Producer: ",t.producer]}),s("h4",{children:["Released date: ",t.release_date]}),s("h2",{children:["Rating: ",t.rt_score]}),s("p",{children:["Length: ",t.running_time," minutes"]})]}),e("article",{className:"movie-description",children:e("p",{children:t.description})})]})]}),!i&&e("button",{onClick:()=>o(!1),style:{color:"#fff",display:"block",margin:"2rem auto 0",padding:"1rem 2rem",border:"1px solid #fff",borderRadius:"3px"},className:"btn",children:"Back to movies"})]})]}),document.getElementById("modal"))},R=({setShowModal:o,showModal:n})=>{const{isError:l,movies:i,isLoading:t}=g();return s("main",{children:[e("h1",{className:"main-title",children:"Studio Ghibili Movies"}),e("ul",{className:"movies-container",children:t?e("h1",{children:"Loading..."}):i.map(r=>e(S,{movie:r,setShowModal:o},r.id))}),e(f,{children:e(v,{path:"/:movie",element:n&&e(E,{setShowModal:o})})})]})};const k=()=>e("nav",{className:"navbar",children:s("div",{className:"navbar-container",children:[e("div",{className:"logo",children:e("h1",{children:"STG."})}),e("div",{className:"search",children:e("form",{children:e("input",{type:"text",placeholder:"search something"})})}),e("div",{className:"account",children:s("div",{className:"account-info",children:[e("p",{children:"hello"}),e("h4",{children:"Evan Miller"})]})})]})});function j(){const[o,n]=c.exports.useState(!0);return s("div",{className:"App",children:[e(k,{}),e(f,{children:e(v,{path:"/*",exact:!0,element:e(R,{showModal:o,setShowModal:n})})})]})}p.render(e(b.StrictMode,{children:e(L,{children:e(j,{})})}),document.getElementById("root"));
